name: Release ArchLinuxARM for Amlogic S9XXX TV Boxes nightly
on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 * * *' # run at 2 AM UTC
permissions:
  contents: write
jobs:
  build:
    uses: ./.github/workflows/build.yml
  release:
    needs: build
    runs-on: ubuntu-latest
    steps:
     - name: Download artifacts
       uses: actions/download-artifact@v3
       with:
         name: artifact
     - name: Display structure of downloaded files
       run: ls -R
     - name: Release
       uses: ncipollo/release-action@v1
       with:
         name: Nightly
         tag: nightly
         artifacts: ArchLinuxARM-aarch64-Amlogic-*.gz
         allowUpdates: true
         removeArtifacts: true